<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title></title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<!-- xhtml,html --> 
<meta name="src" content="Example_4_1.tex" /> 
<meta name="date" content="2017-05-15 11:50:00" /> 
<link rel="stylesheet" type="text/css" href="Example_4_1.css" /> 
</head><body 
>
   <h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x1-10005"></a>Examples</h3>
<!--l. 51--><p class="noindent" >The examples below illustrate the use of the Simulink implementation above.
</p>
   <div class="newtheorem">
<!--l. 1--><p class="noindent" ><span class="head">
 <span 
class="cmbx-10">Example</span><span 
class="cmbx-10">&#x00A0;5.8</span> </span>(Implementation of a FSM)<a 
 id="x1-10011"></a>
</p>
   <hr class="figure" /><div class="figure" 
><a 
 id="x1-10021"></a>
<div class="center" 
>
<!--l. 4--><p class="noindent" >
</p><!--l. 5--><p class="noindent" ><img 
src="Example_4_10x.png" alt="PIC" class="graphics" /><!--tex4ht:graphics  
name="Example_4_10x.png" src="figures/Simulink/FSM_example.pdf"  
-->
<br /> </p><div class="caption" 
><span class="id">Figure&#x00A0;1: </span><span  
class="content">Simulation of a Finite State Machine (FSM) in Example&#x00A0;<a 
href="#x1-10011">5.8<!--tex4ht:ref: ex:FSM --></a>.</span></div><!--tex4ht:label?: x1-10021 -->
</div>
   </div><hr class="endfigure" />
<!--l. 11--><p class="indent" >   Transitions of the state of a FSM are triggered by changes of its input <span 
class="cmmi-10">v</span>. The system can be modeled as a
cascade of two systems, in which an external signal drives the FSM.  A finite state machine (FSM) or deterministic
finite automaton (DFA) is a system with inputs, states, and outputs taking values from discrete sets that are
updated at discrete transitions (or jumps) triggered by its inputs. Then, given a FSM and an initial state <span 
class="cmmi-10">q</span><sub><span 
class="cmr-7">0</span></sub> <span 
class="cmsy-10">&#x2208; </span><span 
class="cmmi-10">Q</span>, a
transition to a state <span 
class="cmmi-10">q</span><sub><span 
class="cmr-7">1</span></sub> = <span 
class="cmmi-10">&#x03B4;</span>(<span 
class="cmmi-10">q</span><sub><span 
class="cmr-7">0</span></sub><span 
class="cmmi-10">,v</span>) is performed when an input <span 
class="cmmi-10">v </span><span 
class="cmsy-10">&#x2208; </span>&#x03A3; is applied to it. After the transition, the
output of the FSM is updated to <span 
class="cmmi-10">&#x03BA;</span>(<span 
class="cmmi-10">q</span><sub><span 
class="cmr-7">1</span></sub>). This mechanism can be captured by the difference equation
</p><div class="eqnarray">
                                                                                         
                                                                                         
   <center class="math-display" >
<img 
src="Example_4_11x.png" alt="q+  =   &#x03B4;(q,v)    &#x03B6; =  &#x03BA;(q)    (q,v) &#x2208; Q &#x00D7; &#x03A3;                      (1)
" class="math-display"  /><a 
 id="x1-1003r1"></a></center>
</div>This model captures the dynamics the model of the cyber components in the instructions document
with
   <center class="math-display" >
<img 
src="Example_4_12x.png" alt="xc = q,   &#x03D2; = Q,    V = &#x03A3;,    Gc = &#x03B4;,    Dc = &#x03D2;&#x00D7; V " class="math-display"  /></center> Note
that there is no notion of time associated with the FSM model above. An example of this model is presented in
Example&#x00A0;<a 
href="#x1-10011">5.8<!--tex4ht:ref: ex:FSM --></a>.  Assuming that the input feeds the input <span 
class="cmmi-10">u </span>of the FSM, the state of the FSM is updated
according to the transition function evaluated at the current input, that is, <span 
class="cmmi-10">q </span>is updated according
to
   <center class="math-display" >
<img 
src="Example_4_13x.png" alt="+
q = &#x03B4;(q,u)
" class="math-display"  /></center>
<!--l. 44--><p class="indent" >   The above model can be summarized as follows:
</p><!--l. 46--><p class="indent" >
                                                                                         
                                                                                         
</p><table 
class="align">
            <tr><td 
class="align-odd"><span 
class="cmmi-10">f</span>(<span 
class="cmmi-10">q,u</span>)</td>            <td 
class="align-even"> := <img 
src="Example_4_14x.png" alt="[ ]
 0
 0"  class="left" align="middle" /><span 
class="cmmi-10">,</span></td>                                                                             <td 
class="align-label"><a 
 id="x1-1004r2"></a>(2)
            </td></tr><tr><td 
class="align-odd"><span 
class="cmmi-10">C </span>:=</td>              <td 
class="align-even"><img 
src="Example_4_15x.png" alt="{(q,u) &#x2208; {1,2}&#x00D7; {1,2}&#x00D7; {1,2}&#x00D7; {1,2} | &#x03B4;(q,u) = q}"  class="left" align="middle" /><span 
class="cmmi-10">,</span></td>                                     <td 
class="align-label"><a 
 id="x1-1005r3"></a>(3)
            </td></tr><tr><td 
class="align-odd"><span 
class="cmmi-10">g</span>(<span 
class="cmmi-10">q,u</span>)</td>            <td 
class="align-even"> := <span 
class="cmmi-10">&#x03B4;</span>(<span 
class="cmmi-10">q,u</span>) = <img 
src="Example_4_16x.png" alt="[      ]
 3 - u1
 3 - u2"  class="left" align="middle" /><span 
class="cmmi-10">,</span></td>                                                                 <td 
class="align-label"><a 
 id="x1-1006r4"></a>(4)
            </td></tr><tr><td 
class="align-odd"><span 
class="cmmi-10">D </span>:=</td>             <td 
class="align-even"><img 
src="Example_4_17x.png" alt="{(q,u) &#x2208; {1,2}&#x00D7; {1,2}&#x00D7; {1,2}&#x00D7; {1,2} | &#x03B4;(q,u) &#x2208; {1,2}&#x00D7; {1,2}\ q}"  class="left" align="middle" /><span 
class="cmmi-10">,</span></td>                        <td 
class="align-label"><a 
 id="x1-1007r5"></a>(5)
            </td></tr><tr><td 
class="align-odd"><span 
class="cmmi-10">y</span></td>                 <td 
class="align-even"> := <span 
class="cmmi-10">h</span>(<span 
class="cmmi-10">q</span>) = <span 
class="cmmi-10">q</span></td>                                                                          <td 
class="align-label"><a 
 id="x1-1008r6"></a>(6)            </td></tr></table>
where the input and the state are given by <span 
class="cmmi-10">u </span>= (<span 
class="cmmi-10">u</span><sub><span 
class="cmr-7">1</span></sub><span 
class="cmmi-10">,u</span><sub><span 
class="cmr-7">2</span></sub>) <span 
class="cmsy-10">&#x2208;{</span>1<span 
class="cmmi-10">,</span>2<span 
class="cmsy-10">}&#x00D7;{</span>1<span 
class="cmmi-10">,</span>2<span 
class="cmsy-10">}</span>, and <span 
class="cmmi-10">q </span>= (<span 
class="cmmi-10">q</span><sub><span 
class="cmr-7">1</span></sub><span 
class="cmmi-10">,q</span><sub><span 
class="cmr-7">2</span></sub>) <span 
class="cmsy-10">&#x2208;{</span>1<span 
class="cmmi-10">,</span>2<span 
class="cmsy-10">}&#x00D7;{</span>1<span 
class="cmmi-10">,</span>2<span 
class="cmsy-10">}</span>,
respectively.
<!--l. 55--><p class="indent" >   For the hybrid system FSM in Figure&#x00A0;<a 
href="#x1-10021">1<!--tex4ht:ref: fig:FSM_example --></a> we have the following Matlab embedded functions that describe
the sets <span 
class="cmmi-10">C </span>and <span 
class="cmmi-10">D </span>and functions <span 
class="cmmi-10">f </span>and <span 
class="cmmi-10">g</span>. Figure&#x00A0;<a 
href="#x1-10092">2<!--tex4ht:ref: fig:FSMresults --></a> depicts the corresponding inputs and state of the
FSM.
</p>
   <hr class="figure" /><div class="figure" 
><a 
 id="x1-10092"></a>
<div class="center" 
>
<!--l. 59--><p class="noindent" >
</p><!--l. 60--><p class="noindent" ><img 
src="Example_4_18x.png" alt="PIC" class="graphics" width="375.80544pt" height="281.85623pt"  /><!--tex4ht:graphics  
name="Example_4_18x.png" src="figures/Simulink/FSMresults.eps"  
-->
<br /> </p><div class="caption" 
><span class="id">Figure&#x00A0;2: </span><span  
class="content">Finite state machine states and inputs.</span></div><!--tex4ht:label?: x1-10092 -->
</div>
   </div><hr class="endfigure" />
                                                                                         
                                                                                         
<!--l. 68--><p class="indent" >   Flow map
</p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;xdot</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;f(x,</span><span 
class="pcrr7t-">&#x00A0;u)</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span><span 
class="pcrr7t-">&#x00A0;Finite</span><span 
class="pcrr7t-">&#x00A0;state</span><span 
class="pcrr7t-">&#x00A0;machine</span><span 
class="pcrr7t-">&#x00A0;(FSM)</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Flow</span><span 
class="pcrr7t-">&#x00A0;map</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;flow</span><span 
class="pcrr7t-">&#x00A0;map:</span><span 
class="pcrr7t-">&#x00A0;xdot=f(x,u);</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;n</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;length(x);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;size</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;the</span><span 
class="pcrr7t-">&#x00A0;q</span><span 
class="pcrr7t-">&#x00A0;state</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;qdot</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;zeros(n,1);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;dynamics</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;the</span><span 
class="pcrr7t-">&#x00A0;q</span><span 
class="pcrr7t-">&#x00A0;state</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xdot</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;[qdot];</span></span><br 
class="newline" />
</p><!--l. 73--><p class="indent" >   Flow set
</p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;C(x,</span><span 
class="pcrr7t-">&#x00A0;u)</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span><span 
class="pcrr7t-">&#x00A0;Finite</span><span 
class="pcrr7t-">&#x00A0;state</span><span 
class="pcrr7t-">&#x00A0;machine</span><span 
class="pcrr7t-">&#x00A0;(FSM)</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Flow</span><span 
class="pcrr7t-">&#x00A0;set</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Check</span><span 
class="pcrr7t-">&#x00A0;on</span><span 
class="pcrr7t-">&#x00A0;flow</span><span 
class="pcrr7t-">&#x00A0;conditions</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;E.g.,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;if</span><span 
class="pcrr7t-">&#x00A0;(x(1)</span><span 
class="pcrr7t-">&#x00A0;&#x003E;=</span><span 
class="pcrr7t-">&#x00A0;u(1))</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;flow</span><span 
class="pcrr7t-">&#x00A0;condition</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;flow</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;else</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;do</span><span 
class="pcrr7t-">&#x00A0;not</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;flow</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">22</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;end</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">23</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" /><span 
class="cmr-7">24</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xtemp</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;zeros(2,1);</span></span><br 
class="newline" /><span 
class="cmr-7">25</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xtemp</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;x;</span></span><br 
class="newline" /><span 
class="cmr-7">26</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;x</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;xtemp;</span></span><br 
class="newline" /><span 
class="cmr-7">27</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" /><span 
class="cmr-7">28</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;n</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;length(x);</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;size</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;the</span><span 
class="pcrr7t-">&#x00A0;q</span><span 
class="pcrr7t-">&#x00A0;state</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">29</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;qplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;zeros(2,1);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;dynamics</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;the</span><span 
class="pcrr7t-">&#x00A0;q</span><span 
class="pcrr7t-">&#x00A0;state</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">30</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;e.g.,</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">31</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;qplus(1)</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;3-u(1);</span></span><br 
class="newline" /><span 
class="cmr-7">32</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;qplus(2)</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;3-u(2);</span></span><br 
class="newline" /><span 
class="cmr-7">33</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">if</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;x(1)==qplus(1)</span><span 
class="pcrr7t-">&#x00A0;&amp;&amp;</span><span 
class="pcrr7t-">&#x00A0;x(2)==qplus(2)</span></span><br 
class="newline" /><span 
class="cmr-7">34</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;flow</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">35</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">else</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">36</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;do</span><span 
class="pcrr7t-">&#x00A0;not</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;flow</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">37</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">end</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">38</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" />
</p><!--l. 78--><p class="indent" >   Jump map
</p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;xplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;g(x,</span><span 
class="pcrr7t-">&#x00A0;u)</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span><span 
class="pcrr7t-">&#x00A0;Finite</span><span 
class="pcrr7t-">&#x00A0;state</span><span 
class="pcrr7t-">&#x00A0;machine</span><span 
class="pcrr7t-">&#x00A0;(FSM)</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Jump</span><span 
class="pcrr7t-">&#x00A0;map</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;jump</span><span 
class="pcrr7t-">&#x00A0;map:</span><span 
class="pcrr7t-">&#x00A0;xplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;g(x,u);</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;n</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;length(x);</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;size</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;the</span><span 
class="pcrr7t-">&#x00A0;q</span><span 
class="pcrr7t-">&#x00A0;state</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;qplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;zeros(2,1);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;dynamics</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;the</span><span 
class="pcrr7t-">&#x00A0;q</span><span 
class="pcrr7t-">&#x00A0;state</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;e.g.,</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;qplus(1)</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;3-u(1);</span></span><br 
class="newline" /><span 
class="cmr-7">22</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;qplus(2)</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;3-u(2);</span></span><br 
class="newline" /><span 
class="cmr-7">23</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" /><span 
class="cmr-7">24</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;[qplus];</span></span><br 
class="newline" /><span 
class="cmr-7">25</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" />
</p><!--l. 83--><p class="indent" >   Jump set
</p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;D(x,</span><span 
class="pcrr7t-">&#x00A0;u)</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span><span 
class="pcrr7t-">&#x00A0;Finite</span><span 
class="pcrr7t-">&#x00A0;state</span><span 
class="pcrr7t-">&#x00A0;machine</span><span 
class="pcrr7t-">&#x00A0;(FSM)</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Jump</span><span 
class="pcrr7t-">&#x00A0;set</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Check</span><span 
class="pcrr7t-">&#x00A0;on</span><span 
class="pcrr7t-">&#x00A0;jump</span><span 
class="pcrr7t-">&#x00A0;conditions</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;E.g.,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;if</span><span 
class="pcrr7t-">&#x00A0;(x(1)</span><span 
class="pcrr7t-">&#x00A0;&#x003C;=</span><span 
class="pcrr7t-">&#x00A0;u(1))</span><span 
class="pcrr7t-">&#x00A0;&amp;&amp;</span><span 
class="pcrr7t-">&#x00A0;(x(2)</span><span 
class="pcrr7t-">&#x00A0;&#x003C;=</span><span 
class="pcrr7t-">&#x00A0;0)</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;jump</span><span 
class="pcrr7t-">&#x00A0;condition</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;jump</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;else</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;do</span><span 
class="pcrr7t-">&#x00A0;not</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;jump</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">22</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;end</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">23</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xtemp</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;zeros(2,1);</span></span><br 
class="newline" /><span 
class="cmr-7">24</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xtemp</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;x;</span></span><br 
class="newline" /><span 
class="cmr-7">25</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;x</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;xtemp;</span></span><br 
class="newline" /><span 
class="cmr-7">26</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" /><span 
class="cmr-7">27</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;n</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;length(x);</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;size</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;the</span><span 
class="pcrr7t-">&#x00A0;q</span><span 
class="pcrr7t-">&#x00A0;state</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">28</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;qplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;zeros(2,1);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;dynamics</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;the</span><span 
class="pcrr7t-">&#x00A0;q</span><span 
class="pcrr7t-">&#x00A0;state</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">29</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;e.g.,</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">30</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;qplus(1)</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;3-u(1);</span></span><br 
class="newline" /><span 
class="cmr-7">31</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;qplus(2)</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;3-u(2);</span></span><br 
class="newline" /><span 
class="cmr-7">32</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">if</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;x(1)==qplus(1)</span><span 
class="pcrr7t-">&#x00A0;&amp;&amp;</span><span 
class="pcrr7t-">&#x00A0;x(2)==qplus(2)</span></span><br 
class="newline" /><span 
class="cmr-7">33</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;do</span><span 
class="pcrr7t-">&#x00A0;not</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;jump</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">34</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">else</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">35</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;jump</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">36</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">end</span></span><span class="verb"></span><br 
class="newline" />
                                                                                         _ 
</p>
   </div>
    
</body></html> 

                                                                                         


