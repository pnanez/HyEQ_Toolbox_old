<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title></title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<!-- xhtml,html --> 
<meta name="src" content="Example_4_2.tex" /> 
<meta name="date" content="2017-05-17 11:15:00" /> 
<link rel="stylesheet" type="text/css" href="Example_4_2.css" /> 
</head><body 
>
   <h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x1-10005"></a>Examples</h3>
<!--l. 51--><p class="noindent" >The examples below illustrate the use of the Simulink implementation above.
</p>
   <hr class="figure" /><div class="figure" 
>
                                                                                         
                                                                                         
<a 
 id="x1-10011"></a>
                                                                                         
                                                                                         
<div class="center" 
>
<!--l. 3--><p class="noindent" >
</p><!--l. 4--><p class="noindent" ><img 
src="Example_4_20x.png" alt="PIC" class="graphics" /><!--tex4ht:graphics  
name="Example_4_20x.png" src="figures/Simulink/NetworkExample.pdf"  
-->
<br /> </p><div class="caption" 
><span class="id">Figure&#x00A0;1: </span><span  
class="content">Estimation over a network scheme in Example&#x00A0;<a 
href="#x1-10021">5.9<!--tex4ht:ref: ex:Estimation --></a>.</span></div><!--tex4ht:label?: x1-10011 -->
</div>
                                                                                         
                                                                                         
   </div><hr class="endfigure" />
   <div class="newtheorem">
<!--l. 10--><p class="noindent" ><span class="head">
 <span 
class="cmbx-10">Example</span><span 
class="cmbx-10">&#x00A0;5.9</span> </span>(Estimation Over a Network)<a 
 id="x1-10021"></a> Consider a physical process given in terms of the state-space
model
</p>
   <table 
class="equation"><tr><td><a 
 id="x1-1003r1"></a>
   <center class="math-display" >
<img 
src="Example_4_21x.png" alt="&#x02D9;x = Ax,     y = M x,   x &#x2208; &#x211D;nP,y &#x2208; &#x211D;rP
" class="math-display"  /></center></td><td class="equation-label">(1)</td></tr></table>
<!--l. 18--><p class="nopar" >
where <span 
class="cmmi-10">x </span>is the state and <span 
class="cmmi-10">y </span>is the measured output. The output is digitally transmitted through a network. At the
other end of the network, a computer receives the information and runs an algorithm that takes the measurements
of <span 
class="cmmi-10">y </span>to estimate the state <span 
class="cmmi-10">x </span>of the physical process. In Figure&#x00A0;<a 
href="#x1-10011">1<!--tex4ht:ref: fig:NetworkExample --></a> the scheme of the simulation is presented. We
consider an estimation algorithm with a state variable <img 
src="Example_4_22x.png" alt="&#x02C6;x"  class="circ"  /> <span 
class="cmsy-10">&#x2208; </span><span 
class="msbm-10">&#x211D;</span><sup><span 
class="cmmi-7">n</span><sub><span 
class="cmmi-5">P</span></sub></sup>, which denotes the estimate of <span 
class="cmmi-10">x</span>, that is
appropriately reset to a new value involving the information received. More precisely, denoting the transmission
times by <span 
class="cmmi-10">t</span><sub><span 
class="cmmi-7">i</span></sub> and <span 
class="cmmi-10">L </span>a constant matrix to be designed, the estimation algorithm updates its state as
follows
</p>
   <table 
class="equation"><tr><td><a 
 id="x1-1004r2"></a>
   <center class="math-display" >
<img 
src="Example_4_23x.png" alt="&#x02C6;x+ = &#x02C6;x+ L(y - M x&#x02C6;)
" class="math-display"  /></center></td><td class="equation-label">(2)</td></tr></table>
<!--l. 33--><p class="nopar" >
at every instant information is received. In between such events, the algorithm updates its state continuously so as
to match the evolution of the state of the physical process, that is, via
</p>
   <table 
class="equation"><tr><td><a 
 id="x1-1005r3"></a>
   <center class="math-display" >
                                                                                         
                                                                                         
<img 
src="Example_4_24x.png" alt="x&#x02D9;&#x02C6;= A &#x02C6;x
" class="math-display"  /></center></td><td class="equation-label">(3)</td></tr></table>
<!--l. 40--><p class="nopar" >
Modeling the network as a hybrid system, which, in particular, assumes zero transmission delay, the state variables
of the entire system are <span 
class="cmmi-10">j</span><sub><span 
class="cmmi-7">N</span></sub>, <span 
class="cmmi-10">&#x03C4;</span><sub><span 
class="cmmi-7">N</span></sub> <span 
class="cmsy-10">&#x2208; </span><span 
class="msbm-10">&#x211D;</span>, <span 
class="cmmi-10">m</span><sub><span 
class="cmmi-7">N</span></sub> <span 
class="cmsy-10">&#x2208; </span><span 
class="msbm-10">&#x211D;</span><sup><span 
class="cmmi-7">r</span><sub><span 
class="cmmi-5">P</span></sub></sup>, and <span 
class="cmmi-10">x,</span><span 
class="cmmi-10">&#x00A0;</span><img 
src="Example_4_25x.png" alt="&#x02C6;x"  class="circ"  /> <span 
class="cmsy-10">&#x2208; </span><span 
class="msbm-10">&#x211D;</span><sup><span 
class="cmmi-7">n</span><sub><span 
class="cmmi-5">P</span></sub></sup>. Then, transmissions occur when <span 
class="cmmi-10">&#x03C4;</span><sub><span 
class="cmmi-7">N</span></sub> <span 
class="cmsy-10">&#x2264; </span>0, at which
events the state of the network is updated via
</p>
   <center class="math-display" >
<img 
src="Example_4_26x.png" alt=" +    *min  *max    +               +
&#x03C4;N &#x2208; [TN   ,TN   ],  jN = jN + 1,   m N = y  " class="math-display"  /></center> and
the state of the algorithm is updated via (<a 
href="#x1-1004r2">2<!--tex4ht:ref: eqn:HatXpUpdateExample --></a>). Note that since the state of the physical process does not
change at such events, we can use the following trivial difference equation to update it at the network
events:
   <center class="math-display" >
<img 
src="Example_4_27x.png" alt="x+ = x  " class="math-display"  /></center> In
between events, the state of the network is updated as
   <center class="math-display" >
<img 
src="Example_4_28x.png" alt="&#x02D9;&#x03C4;N = - 1,   &#x02D9;jN,    &#x02D9;mN = 0  " class="math-display"  /></center> the
state of the algorithm changes continuously according to (<a 
href="#x1-1005r3">3<!--tex4ht:ref: eqn:HatXpFlowsExample --></a>), and the state of the physical process changes according
to (<a 
href="#x1-1003r1">1<!--tex4ht:ref: eqn:PlantForEstimation --></a>). Considering the equations above, we arbitrarily pick the following data for each of the subsystems in
Figure&#x00A0;<a 
href="#x1-10011">1<!--tex4ht:ref: fig:NetworkExample --></a>:
     <ul class="itemize1">
     <li class="itemize">Physical process: <div class="eqnarray">
                                                                                         
                                                                                         
     <center class="math-display" >
     <img 
src="Example_4_29x.png" alt="                             np
   fP (x,u) := Ax + Bu, CP := &#x211D;  &#x00D7; &#x211D;                            (4)
GP (x,u ) := x, DP := &#x2205;, y = h(x) := M x                        (5)
     " class="math-display"  /></center>
     </div>where
     <table 
class="align">
                          <tr><td 
class="align-odd"><span 
class="cmmi-10">A </span>= <img 
src="Example_4_210x.png" alt="&#x230A;               &#x230B;
  0   1   0    0
||- 1  0   0    0||
&#x2308;- 2  1  - 1   0&#x2309;
  2  - 2  0   - 2"  class="left" align="middle" /><span 
class="cmmi-10">,   B </span>= <img 
src="Example_4_211x.png" alt="&#x230A; &#x230B;
 0
||0||
&#x2308;0&#x2309;
 0"  class="left" align="middle" /><span 
class="cmmi-10">,   M </span>= <img 
src="Example_4_212x.png" alt="[1  0  0  0]"  class="left" align="middle" /><span 
class="cmmi-10">,</span></td>                      <td 
class="align-even"></td>                      <td 
class="align-label"><a 
 id="x1-1007r6"></a>(6)                          </td></tr></table>
     <span 
class="cmmi-10">n</span><sub><span 
class="cmmi-7">p</span></sub> = 4, <span 
class="cmmi-10">r</span><sub><span 
class="cmmi-7">p</span></sub> = 1, <span 
class="cmmi-10">x </span><span 
class="cmsy-10">&#x2208; </span><span 
class="msbm-10">&#x211D;</span><sup><span 
class="cmmi-7">n</span><sub><span 
class="cmmi-5">p</span></sub></sup>, <span 
class="cmmi-10">y </span><span 
class="cmsy-10">&#x2208; </span><span 
class="msbm-10">&#x211D;</span><sup><span 
class="cmmi-7">r</span><sub><span 
class="cmmi-5">p</span></sub></sup>, and <span 
class="cmmi-10">u </span><span 
class="cmsy-10">&#x2208; </span><span 
class="msbm-10">&#x211D;</span>.
     </li>
     <li class="itemize">Network:
     <!--l. 90--><p class="noindent" >
                                                                                         
                                                                                         
     </p><table 
class="align">
        <tr><td 
class="align-odd"><span 
class="cmmi-10">f</span>(<span 
class="cmmi-10">x</span><sub><span 
class="cmmi-7">N</span></sub><span 
class="cmmi-10">,u</span><sub><span 
class="cmmi-7">N</span></sub>)</td>        <td 
class="align-even"> := <img 
src="Example_4_213x.png" alt="&#x230A;   &#x230B;
  0
&#x2308; 0 &#x2309;
 - 1"  class="left" align="middle" /><span 
class="cmmi-10">,</span><span 
class="cmmi-10">&#x00A0;</span></td>           <td 
class="align-odd"><span 
class="cmmi-10">C</span></td>        <td 
class="align-even"> := <img 
src="Example_4_214x.png" alt="{(xN ,uN) | &#x03C4;N &#x2265; 0}"  class="left" align="middle" /><span 
class="cmmi-10">,</span></td>                                                  <td 
class="align-label"><a 
 id="x1-1008r7"></a>(7)
        </td></tr><tr><td 
class="align-odd"><span 
class="cmmi-10">g</span>(<span 
class="cmmi-10">x</span><sub><span 
class="cmmi-7">N</span></sub><span 
class="cmmi-10">,u</span><sub><span 
class="cmmi-7">N</span></sub>)</td>        <td 
class="align-even"> := <img 
src="Example_4_215x.png" alt="&#x230A;  u   &#x230B;
&#x2308;j  N+ 1&#x2309;
  N&#x03C4;
    r"  class="left" align="middle" /><span 
class="cmmi-10">,</span><span 
class="cmmi-10">&#x00A0;</span></td>        <td 
class="align-odd"><span 
class="cmmi-10">D</span></td>        <td 
class="align-even"> := <img 
src="Example_4_216x.png" alt="{(x  ,u ) | &#x03C4; &#x2264; 0}
  N   N    N"  class="left" align="middle" /><span 
class="cmmi-10">,   y</span><sub><span 
class="cmmi-7">N</span></sub> = <span 
class="cmmi-10">h</span>(<span 
class="cmmi-10">x</span><sub><span 
class="cmmi-7">N</span></sub>) := <span 
class="cmmi-10">x</span><sub><span 
class="cmmi-7">N</span></sub></td>                                <td 
class="align-label"><a 
 id="x1-1009r8"></a>(8)        </td></tr></table>
     where <span 
class="cmmi-10">&#x03C4;</span><sub><span 
class="cmmi-7">r</span></sub> <span 
class="cmsy-10">&#x2208; </span>[<span 
class="cmmi-10">T</span><sub><span 
class="cmmi-7">N</span></sub><sup><span 
class="cmsy-7">*</span> <span 
class="cmr-7">min</span></sup><span 
class="cmmi-10">,T</span><sub><span 
class="cmmi-7">N</span></sub><sup><span 
class="cmsy-7">*</span> <span 
class="cmr-7">max</span></sup>] is a random variable that models the time in-between communication instances.
     Also, the sate and the input are given by <span 
class="cmmi-10">x</span><sub><span 
class="cmmi-7">N</span></sub> = (<span 
class="cmmi-10">m</span><sub><span 
class="cmmi-7">N</span></sub><span 
class="cmmi-10">,j</span><sub><span 
class="cmmi-7">N</span></sub><span 
class="cmmi-10">,&#x03C4;</span><sub><span 
class="cmmi-7">N</span></sub>) <span 
class="cmsy-10">&#x2208; </span><span 
class="msbm-10">&#x211D; </span><span 
class="cmsy-10">&#x00D7; </span><span 
class="msbm-10">&#x211D; </span><span 
class="cmsy-10">&#x00D7; </span><span 
class="msbm-10">&#x211D;</span>, and <span 
class="cmmi-10">u</span><sub><span 
class="cmmi-7">N</span></sub> = <span 
class="cmmi-10">y </span><span 
class="cmsy-10">&#x2208; </span><span 
class="msbm-10">&#x211D;</span><sup><span 
class="cmmi-7">r</span><sub><span 
class="cmmi-5">p</span></sub></sup>,
     respectively.
     </li>
     <li class="itemize">Estimator:
     <table 
class="align">
               <tr><td 
class="align-odd"><span 
class="cmmi-10">f</span>(<span 
class="cmmi-10">x</span><sub><span 
class="cmmi-7">E</span></sub><span 
class="cmmi-10">,u</span><sub><span 
class="cmmi-7">E</span></sub>)</td>                    <td 
class="align-even"> := <img 
src="Example_4_217x.png" alt="[     ]
 A   0
  0  0"  class="left" align="middle" /><span 
class="cmmi-10">x</span><sub><span 
class="cmmi-7">E</span></sub> + <img 
src="Example_4_218x.png" alt="[  ]
 B
 0"  class="left" align="middle" /><span 
class="cmmi-10">v,</span><span 
class="cmmi-10">&#x00A0;</span></td>             <td 
class="align-odd"><span 
class="cmmi-10">C</span></td>             <td 
class="align-even"> := <img 
src="Example_4_219x.png" alt="{(xE,uE) | jE = jN}"  class="left" align="middle" /><span 
class="cmmi-10">,</span></td>                                                    <td 
class="align-label"><a 
 id="x1-1010r9"></a>(9)
               </td></tr><tr><td 
class="align-odd"><span 
class="cmmi-10">g</span>((<img 
src="Example_4_220x.png" alt="&#x02C6;x"  class="circ"  /><span 
class="cmmi-10">,j</span><sub><span 
class="cmmi-7">E</span></sub>)<span 
class="cmmi-10">,u</span><sub><span 
class="cmmi-7">E</span></sub>)</td>               <td 
class="align-even"> := <img 
src="Example_4_221x.png" alt="[               ]
 x&#x02C6;+ L(mN - M &#x02C6;x)
        jN"  class="left" align="middle" /><span 
class="cmmi-10">,</span><span 
class="cmmi-10">&#x00A0;</span></td>             <td 
class="align-odd"><span 
class="cmmi-10">D</span></td>             <td 
class="align-even"> := <img 
src="Example_4_222x.png" alt="{(x,u) | j &#x2208; &#x2115; \j }
         E      N"  class="left" align="middle" /><span 
class="cmmi-10">,</span></td>                                                    <td 
class="align-label"><a 
 id="x1-1011r10"></a>(10)               </td></tr></table>
     where <span 
class="cmmi-10">L</span>, which is designed as in&#x00A0;<span class="cite">[<a 
href="#XFGST16">1</a>]</span>, is given by
                                                                                         
                                                                                         
     <table 
class="align">
                                                       <tr><td 
class="align-odd"><span 
class="cmmi-10">L</span></td>                                               <td 
class="align-even"> := <img 
src="Example_4_223x.png" alt="&#x230A;       &#x230B;
    1
||- 0.9433||
&#x2308;- 0.6773&#x2309;
  1.6274"  class="left" align="middle" /><span 
class="cmmi-10">,</span></td>                                                                                              <td 
class="align-label"><a 
 id="x1-1012r11"></a>(11)                                                       </td></tr></table>
     the input and the state are given by <span 
class="cmmi-10">u</span><sub><span 
class="cmmi-7">E</span></sub> = (<span 
class="cmmi-10">x</span><sub><span 
class="cmmi-7">N</span></sub><span 
class="cmmi-10">,v</span>) = ((<span 
class="cmmi-10">m</span><sub><span 
class="cmmi-7">N</span></sub><span 
class="cmmi-10">,j</span><sub><span 
class="cmmi-7">N</span></sub><span 
class="cmmi-10">,&#x03C4;</span><sub><span 
class="cmmi-7">N</span></sub>)<span 
class="cmmi-10">,v</span>) <span 
class="cmsy-10">&#x2208; </span><span 
class="msbm-10">&#x211D; </span><span 
class="cmsy-10">&#x00D7; </span><span 
class="msbm-10">&#x211D; </span><span 
class="cmsy-10">&#x00D7; </span><span 
class="msbm-10">&#x211D; </span><span 
class="cmsy-10">&#x00D7; </span><span 
class="msbm-10">&#x211D;</span>, and
     <span 
class="cmmi-10">x</span><sub><span 
class="cmmi-7">E</span></sub> = (<img 
src="Example_4_224x.png" alt="&#x02C6;x"  class="circ"  /><span 
class="cmmi-10">,j</span><sub><span 
class="cmmi-7">E</span></sub>) <span 
class="cmsy-10">&#x2208; </span><span 
class="msbm-10">&#x211D;</span><sup><span 
class="cmr-7">4</span></sup> <span 
class="cmsy-10">&#x00D7; </span><span 
class="msbm-10">&#x211D;</span>, respectively. Notice that the estimator block (Estimator) in Figure&#x00A0;<a 
href="#x1-10011">1<!--tex4ht:ref: fig:NetworkExample --></a> is implemented
     using a regular hybrid system block with embedded functions.
     </li></ul>
<!--l. 137--><p class="indent" >   For each hybrid system in Figure&#x00A0;<a 
href="#x1-10011">1<!--tex4ht:ref: fig:NetworkExample --></a> (HSu, network, and Estimator) we have the following Matlab embedded
functions that describe the sets <span 
class="cmmi-10">C </span>and <span 
class="cmmi-10">D </span>and functions <span 
class="cmmi-10">f </span>and <span 
class="cmmi-10">g</span>. Figure&#x00A0;<a 
href="#x1-10132">2<!--tex4ht:ref: fig:Net-Est --></a> depicts the corresponding hybrid arc for
the position state.
</p>
   <hr class="figure" /><div class="figure" 
><a 
 id="x1-10132"></a>
<div class="center" 
>
<!--l. 141--><p class="noindent" >
                                                                                         
                                                                                         
</p><!--l. 142--><p class="noindent" ><img 
src="Example_4_225x.png" alt="PIC" class="graphics" width="375.80544pt" height="411.63826pt"  /><!--tex4ht:graphics  
name="Example_4_225x.png" src="figures/Simulink/ResultsNetworkEstimator1.eps"  
-->
<br /> </p><div class="caption" 
><span class="id">Figure&#x00A0;2: </span><span  
class="content">Estimated states Vs. continuous plant states</span></div><!--tex4ht:label?: x1-10132 -->
</div>
   </div><hr class="endfigure" />
     <ul class="itemize1">
     <li class="itemize">Continuous process:
     <!--l. 152--><p class="noindent" >Flow map
     </p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;zdot</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;f(z,</span><span 
class="pcrr7t-">&#x00A0;u,</span><span 
class="pcrr7t-">&#x00A0;ctes)</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span><span 
class="pcrr7t-">&#x00A0;(plant</span><span 
class="pcrr7t-">&#x00A0;with</span><span 
class="pcrr7t-">&#x00A0;constraints</span><span 
class="pcrr7t-">&#x00A0;in</span><span 
class="pcrr7t-">&#x00A0;the</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;state</span><span 
class="pcrr7t-">&#x00A0;and</span><span 
class="pcrr7t-">&#x00A0;the</span><span 
class="pcrr7t-">&#x00A0;input)</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Flow</span><span 
class="pcrr7t-">&#x00A0;map</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;flow</span><span 
class="pcrr7t-">&#x00A0;map:</span><span 
class="pcrr7t-">&#x00A0;xdot=f(x,u);</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;ctes</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;[A,B,M',L,P];</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;A</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;ctes(:,1:4);</span></span><br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;B</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;ctes(:,5);</span></span><br 
class="newline" /><span 
class="cmr-7">22</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;M</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;ctes(:,6)';</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">23</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;L</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;ctes(:,7);</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">24</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">25</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;zdot</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;A&#x22C6;z</span><span 
class="pcrr7t-">&#x00A0;+</span><span 
class="pcrr7t-">&#x00A0;B&#x22C6;u;</span></span><br 
class="newline" />
     </p><!--l. 157--><p class="noindent" >Flow set
     </p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;C(x,</span><span 
class="pcrr7t-">&#x00A0;u)</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Flow</span><span 
class="pcrr7t-">&#x00A0;set</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Check</span><span 
class="pcrr7t-">&#x00A0;on</span><span 
class="pcrr7t-">&#x00A0;flow</span><span 
class="pcrr7t-">&#x00A0;conditions</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;E.g.,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;if</span><span 
class="pcrr7t-">&#x00A0;(x(1)</span><span 
class="pcrr7t-">&#x00A0;&#x003E;=</span><span 
class="pcrr7t-">&#x00A0;u(1))</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;flow</span><span 
class="pcrr7t-">&#x00A0;condition</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;flow</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;else</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;do</span><span 
class="pcrr7t-">&#x00A0;not</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;flow</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">22</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;end</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">23</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">24</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">25</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;flow</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">26</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" />
     </p><!--l. 162--><p class="noindent" >Jump map
     </p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;xplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;g(x,</span><span 
class="pcrr7t-">&#x00A0;u)</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Jump</span><span 
class="pcrr7t-">&#x00A0;map</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;jump</span><span 
class="pcrr7t-">&#x00A0;map:</span><span 
class="pcrr7t-">&#x00A0;xplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;g(x,u);</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;zeros(4,1);</span></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;x;</span></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" />
     </p><!--l. 167--><p class="noindent" >Jump set
     </p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;D(x,</span><span 
class="pcrr7t-">&#x00A0;u)</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Jump</span><span 
class="pcrr7t-">&#x00A0;set</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Check</span><span 
class="pcrr7t-">&#x00A0;on</span><span 
class="pcrr7t-">&#x00A0;jump</span><span 
class="pcrr7t-">&#x00A0;conditions</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;E.g.,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;if</span><span 
class="pcrr7t-">&#x00A0;(x(1)</span><span 
class="pcrr7t-">&#x00A0;&#x003C;=</span><span 
class="pcrr7t-">&#x00A0;u(1))</span><span 
class="pcrr7t-">&#x00A0;&amp;&amp;</span><span 
class="pcrr7t-">&#x00A0;(x(2)</span><span 
class="pcrr7t-">&#x00A0;&#x003C;=</span><span 
class="pcrr7t-">&#x00A0;0)</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;jump</span><span 
class="pcrr7t-">&#x00A0;condition</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;jump</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;else</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;do</span><span 
class="pcrr7t-">&#x00A0;not</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;jump</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">22</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;end</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">23</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">24</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;do</span><span 
class="pcrr7t-">&#x00A0;not</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;jump</span></span><span class="verb"></span><br 
class="newline" />
     </p></li>
     <li class="itemize">Network:
     <!--l. 174--><p class="noindent" >Flow map
     </p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;xdot</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;f(x,vs)</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span><span 
class="pcrr7t-">&#x00A0;Digital</span><span 
class="pcrr7t-">&#x00A0;network</span><span 
class="pcrr7t-">&#x00A0;(net)</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Flow</span><span 
class="pcrr7t-">&#x00A0;map</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;n</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;length(vs);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;measured</span><span 
class="pcrr7t-">&#x00A0;input</span><span 
class="pcrr7t-">&#x00A0;size</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;msdot</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;zeros(n,1);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;measured</span><span 
class="pcrr7t-">&#x00A0;continuous</span><span 
class="pcrr7t-">&#x00A0;dynamics</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;jdot</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;tau_sdot</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;-1;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Timer</span><span 
class="pcrr7t-">&#x00A0;tau_s</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xdot</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;[msdot;jdot;tau_sdot];</span></span><br 
class="newline" /><span 
class="cmr-7">22</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" />
     </p><!--l. 179--><p class="noindent" >Flow set
     </p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;C(x,</span><span 
class="pcrr7t-">&#x00A0;vs,</span><span 
class="pcrr7t-">&#x00A0;Tnmax)</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span><span 
class="pcrr7t-">&#x00A0;Digital</span><span 
class="pcrr7t-">&#x00A0;network</span><span 
class="pcrr7t-">&#x00A0;(net)</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Flow</span><span 
class="pcrr7t-">&#x00A0;set</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Check</span><span 
class="pcrr7t-">&#x00A0;on</span><span 
class="pcrr7t-">&#x00A0;flow</span><span 
class="pcrr7t-">&#x00A0;conditions</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;E.g.,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;if</span><span 
class="pcrr7t-">&#x00A0;(x(1)</span><span 
class="pcrr7t-">&#x00A0;&#x003E;=</span><span 
class="pcrr7t-">&#x00A0;u(1))</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;flow</span><span 
class="pcrr7t-">&#x00A0;condition</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;flow</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;else</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;do</span><span 
class="pcrr7t-">&#x00A0;not</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;flow</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">22</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;end</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">23</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">24</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;tau_s</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;x(end);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;timer</span><span 
class="pcrr7t-">&#x00A0;state</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">25</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">26</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">if</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;tau_s&#x003E;=0</span><span 
class="pcrr7t-">&#x00A0;&amp;&amp;</span><span 
class="pcrr7t-">&#x00A0;tau_s&#x003C;=</span><span 
class="pcrr7t-">&#x00A0;Tnmax</span></span><br 
class="newline" /><span 
class="cmr-7">27</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;flow</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">28</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">elseif</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;tau_s&#x003E;</span><span 
class="pcrr7t-">&#x00A0;Tnmax</span></span><br 
class="newline" /><span 
class="cmr-7">29</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;do</span><span 
class="pcrr7t-">&#x00A0;not</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;flow</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">30</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">else</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">31</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span></span><br 
class="newline" /><span 
class="cmr-7">32</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">end</span></span><span class="verb"></span><br 
class="newline" />
     </p><!--l. 184--><p class="noindent" >Jump map
     </p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;xplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;g(x,</span><span 
class="pcrr7t-">&#x00A0;vs,</span><span 
class="pcrr7t-">&#x00A0;Tnmax,</span><span 
class="pcrr7t-">&#x00A0;Tnmin,</span><span 
class="pcrr7t-">&#x00A0;tk)</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span><span 
class="pcrr7t-">&#x00A0;Analog-to-Digital</span><span 
class="pcrr7t-">&#x00A0;converter</span><span 
class="pcrr7t-">&#x00A0;(ADC)</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Jump</span><span 
class="pcrr7t-">&#x00A0;map</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;n</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;length(vs);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;measured</span><span 
class="pcrr7t-">&#x00A0;input</span><span 
class="pcrr7t-">&#x00A0;size</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xtemp</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;zeros(n+2,1);</span></span><br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xtemp</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;x;</span></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;x</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;xtemp;</span></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">22</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;j</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;x(n+1);</span></span><br 
class="newline" /><span 
class="cmr-7">23</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;msplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;vs;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;output</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;measured</span><span 
class="pcrr7t-">&#x00A0;input</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">24</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;The</span><span 
class="pcrr7t-">&#x00A0;value</span><span 
class="pcrr7t-">&#x00A0;tau_s</span><span 
class="pcrr7t-">&#x00A0;is</span><span 
class="pcrr7t-">&#x00A0;updated</span><span 
class="pcrr7t-">&#x00A0;as</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;function</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;vs,</span><span 
class="pcrr7t-">&#x00A0;e.g.,</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">25</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;tau_splus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;tk(j+1);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Timer</span><span 
class="pcrr7t-">&#x00A0;tau_s</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">26</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;j_plus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;j+1;</span></span><br 
class="newline" /><span 
class="cmr-7">27</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;[msplus;j_plus;tau_splus];</span></span><br 
class="newline" /><span 
class="cmr-7">28</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">29</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">30</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" />
     </p><!--l. 189--><p class="noindent" >Jump set
     </p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;D(x,</span><span 
class="pcrr7t-">&#x00A0;vs)</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span><span 
class="pcrr7t-">&#x00A0;Analog-to-Digital</span><span 
class="pcrr7t-">&#x00A0;converter</span><span 
class="pcrr7t-">&#x00A0;(ADC)</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Jump</span><span 
class="pcrr7t-">&#x00A0;set</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Check</span><span 
class="pcrr7t-">&#x00A0;on</span><span 
class="pcrr7t-">&#x00A0;jump</span><span 
class="pcrr7t-">&#x00A0;conditions</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;E.g.,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;if</span><span 
class="pcrr7t-">&#x00A0;(x(1)</span><span 
class="pcrr7t-">&#x00A0;&#x003C;=</span><span 
class="pcrr7t-">&#x00A0;u(1))</span><span 
class="pcrr7t-">&#x00A0;&amp;&amp;</span><span 
class="pcrr7t-">&#x00A0;(x(2)</span><span 
class="pcrr7t-">&#x00A0;&#x003C;=</span><span 
class="pcrr7t-">&#x00A0;0)</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;jump</span><span 
class="pcrr7t-">&#x00A0;condition</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;jump</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;else</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;do</span><span 
class="pcrr7t-">&#x00A0;not</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;jump</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">22</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;end</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">23</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">24</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">25</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;tau_s</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;x(end);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;timer</span><span 
class="pcrr7t-">&#x00A0;state</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">26</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">27</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">if</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;tau_s&#x003E;=0</span></span><br 
class="newline" /><span 
class="cmr-7">28</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;do</span><span 
class="pcrr7t-">&#x00A0;not</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;jump</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">29</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">elseif</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;tau_s&#x003C;=</span><span 
class="pcrr7t-">&#x00A0;0</span></span><br 
class="newline" /><span 
class="cmr-7">30</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;jump</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">31</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">else</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">32</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span></span><br 
class="newline" /><span 
class="cmr-7">33</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">end</span></span><span class="verb"></span><br 
class="newline" />
     </p></li>
     <li class="itemize">Estimator:
     <!--l. 196--><p class="noindent" >Flow map
     </p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;xdot</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;f(x,</span><span 
class="pcrr7t-">&#x00A0;v,ctes)</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Flow</span><span 
class="pcrr7t-">&#x00A0;map</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;flow</span><span 
class="pcrr7t-">&#x00A0;map:</span><span 
class="pcrr7t-">&#x00A0;xdot=f(x,u);</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;ctes</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;[A,B,M',L,P];</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;A</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;ctes(:,1:4);</span></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;B</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;ctes(:,5);</span></span><br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;M</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;ctes(:,6)';</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">22</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;L</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;ctes(:,7);</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">23</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;n</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;length(A);</span></span><br 
class="newline" /><span 
class="cmr-7">24</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;u</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;v(end);</span></span><br 
class="newline" /><span 
class="cmr-7">25</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;z</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;x(1:n);</span></span><br 
class="newline" /><span 
class="cmr-7">26</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;jdot</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span></span><br 
class="newline" /><span 
class="cmr-7">27</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;zdot</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;A&#x22C6;z</span><span 
class="pcrr7t-">&#x00A0;+</span><span 
class="pcrr7t-">&#x00A0;B&#x22C6;u;</span></span><br 
class="newline" /><span 
class="cmr-7">28</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xdot</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;[zdot;jdot];</span></span><br 
class="newline" />
     </p><!--l. 201--><p class="noindent" >Flow set
     </p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;out</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;C(x,</span><span 
class="pcrr7t-">&#x00A0;v)</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Flow</span><span 
class="pcrr7t-">&#x00A0;set</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Check</span><span 
class="pcrr7t-">&#x00A0;on</span><span 
class="pcrr7t-">&#x00A0;flow</span><span 
class="pcrr7t-">&#x00A0;conditions</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;E.g.,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;if</span><span 
class="pcrr7t-">&#x00A0;(x(1)</span><span 
class="pcrr7t-">&#x00A0;&#x003E;=</span><span 
class="pcrr7t-">&#x00A0;u(1))</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;flow</span><span 
class="pcrr7t-">&#x00A0;condition</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;flow</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;else</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;do</span><span 
class="pcrr7t-">&#x00A0;not</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;flow</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">22</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;end</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">23</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">24</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;j</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;x(end);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;internal</span><span 
class="pcrr7t-">&#x00A0;communication</span><span 
class="pcrr7t-">&#x00A0;memory</span><span 
class="pcrr7t-">&#x00A0;event</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">25</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;jnet</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;v(end-2);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;communication</span><span 
class="pcrr7t-">&#x00A0;event</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">26</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">27</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">if</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;j</span><span 
class="pcrr7t-">&#x00A0;==</span><span 
class="pcrr7t-">&#x00A0;jnet</span></span><br 
class="newline" /><span 
class="cmr-7">28</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;out</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;flow</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">29</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">else</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">30</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;out</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span></span><br 
class="newline" /><span 
class="cmr-7">31</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">end</span></span><span class="verb"></span><br 
class="newline" />
     </p><!--l. 206--><p class="noindent" >Jump map
     </p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;xplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;g(x,</span><span 
class="pcrr7t-">&#x00A0;v,</span><span 
class="pcrr7t-">&#x00A0;ctes)</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Jump</span><span 
class="pcrr7t-">&#x00A0;map</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;jump</span><span 
class="pcrr7t-">&#x00A0;map:</span><span 
class="pcrr7t-">&#x00A0;xplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;g(x,u);</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;A</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;ctes(:,1:4);</span></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;M</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;ctes(:,6)';</span></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;L</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;ctes(:,7);</span></span><br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">22</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;n</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;4;</span></span><br 
class="newline" /><span 
class="cmr-7">23</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;z</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;zeros(4,1);</span></span><br 
class="newline" /><span 
class="cmr-7">24</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;zplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;zeros(4,1);</span></span><br 
class="newline" /><span 
class="cmr-7">25</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;zeros(5,1);</span></span><br 
class="newline" /><span 
class="cmr-7">26</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;z</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;x(1:4);</span></span><br 
class="newline" /><span 
class="cmr-7">27</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;jnet</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;v(2);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;communication</span><span 
class="pcrr7t-">&#x00A0;event</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">28</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;y</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;v(1);</span></span><br 
class="newline" /><span 
class="cmr-7">29</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">30</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;jplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;jnet;</span></span><br 
class="newline" /><span 
class="cmr-7">31</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;zplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;z</span><span 
class="pcrr7t-">&#x00A0;+</span><span 
class="pcrr7t-">&#x00A0;L&#x22C6;(y-M&#x22C6;z);</span></span><br 
class="newline" /><span 
class="cmr-7">32</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;xplus</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;[zplus;jplus];</span></span><br 
class="newline" />
     </p><!--l. 211--><p class="noindent" >Jump set
     </p><!--l. 25--><p class="noindent" ><span 
class="cmr-7">1</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">function</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;out</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;D(x,</span><span 
class="pcrr7t-">&#x00A0;v)</span><span 
class="pcrr7t-">&#x00A0;</span></span><br 
class="newline" /><span 
class="cmr-7">2</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">3</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Matlab</span><span 
class="pcrr7t-">&#x00A0;M-file</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;HyEQ</span><span 
class="pcrr7t-">&#x00A0;Toolbox</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">4</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;https://hybrid.soe.ucsc.edu/software</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">5</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;http://hybridsimulator.wordpress.com/</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">6</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">7</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Project:</span><span 
class="pcrr7t-">&#x00A0;Simulation</span><span 
class="pcrr7t-">&#x00A0;of</span><span 
class="pcrr7t-">&#x00A0;a</span><span 
class="pcrr7t-">&#x00A0;hybrid</span><span 
class="pcrr7t-">&#x00A0;system</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">8</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Description:</span><span 
class="pcrr7t-">&#x00A0;Jump</span><span 
class="pcrr7t-">&#x00A0;set</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">9</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">10</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%--------------------------------------------------------------------------</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">11</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;See</span><span 
class="pcrr7t-">&#x00A0;also</span><span 
class="pcrr7t-">&#x00A0;HYEQSOLVER,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTARC3,</span><span 
class="pcrr7t-">&#x00A0;PLOTFLOWS,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARC,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">12</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR,</span><span 
class="pcrr7t-">&#x00A0;PLOTHARCCOLOR3D,</span><span 
class="pcrr7t-">&#x00A0;PLOTHYBRIDARC,</span><span 
class="pcrr7t-">&#x00A0;PLOTJUMPS.</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">13</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Copyright</span><span 
class="pcrr7t-">&#x00A0;@</span><span 
class="pcrr7t-">&#x00A0;Hybrid</span><span 
class="pcrr7t-">&#x00A0;Systems</span><span 
class="pcrr7t-">&#x00A0;Laboratory</span><span 
class="pcrr7t-">&#x00A0;(HSL),</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">14</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;Revision:</span><span 
class="pcrr7t-">&#x00A0;0.0.0.3</span><span 
class="pcrr7t-">&#x00A0;Date:</span><span 
class="pcrr7t-">&#x00A0;05/20/2015</span><span 
class="pcrr7t-">&#x00A0;3:42:00</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">15</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">16</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;Check</span><span 
class="pcrr7t-">&#x00A0;on</span><span 
class="pcrr7t-">&#x00A0;jump</span><span 
class="pcrr7t-">&#x00A0;conditions</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">17</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;E.g.,</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">18</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;if</span><span 
class="pcrr7t-">&#x00A0;(x(1)</span><span 
class="pcrr7t-">&#x00A0;&#x003C;=</span><span 
class="pcrr7t-">&#x00A0;u(1))</span><span 
class="pcrr7t-">&#x00A0;&amp;&amp;</span><span 
class="pcrr7t-">&#x00A0;(x(2)</span><span 
class="pcrr7t-">&#x00A0;&#x003C;=</span><span 
class="pcrr7t-">&#x00A0;0)</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;jump</span><span 
class="pcrr7t-">&#x00A0;condition</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">19</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;jump</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">20</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;else</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">21</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;v</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;%</span><span 
class="pcrr7t-">&#x00A0;do</span><span 
class="pcrr7t-">&#x00A0;not</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;jump</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">22</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;end</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">23</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">24</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">25</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;n</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;length(x)-1;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;measured</span><span 
class="pcrr7t-">&#x00A0;input</span><span 
class="pcrr7t-">&#x00A0;size</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">26</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;j</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;x(end);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;internal</span><span 
class="pcrr7t-">&#x00A0;communication</span><span 
class="pcrr7t-">&#x00A0;memory</span><span 
class="pcrr7t-">&#x00A0;event</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">27</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;jnet</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;v(end-2);</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;communication</span><span 
class="pcrr7t-">&#x00A0;event</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">28</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" /><span 
class="cmr-7">29</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">if</span></span><span class="verb"><span 
class="pcrr7t-">&#x00A0;j</span><span 
class="pcrr7t-">&#x00A0;~=</span><span 
class="pcrr7t-">&#x00A0;jnet</span></span><br 
class="newline" /><span 
class="cmr-7">30</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;out</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;1;</span><span 
class="pcrr7t-">&#x00A0;</span></span><span class="verb"><span 
class="pcrr7t-">%</span><span 
class="pcrr7t-">&#x00A0;report</span><span 
class="pcrr7t-">&#x00A0;jump</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">31</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">else</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">32</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;out</span><span 
class="pcrr7t-">&#x00A0;=</span><span 
class="pcrr7t-">&#x00A0;0;</span></span><br 
class="newline" /><span 
class="cmr-7">33</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <span class="verb"><span 
class="pcrr7t-">end</span></span><span class="verb"></span><br 
class="newline" /><span 
class="cmr-7">34</span><span class="verb"><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span></span> <br 
class="newline" />
</p>
     </li></ul>
                                                                                         _ 
   </div>
   <h3 class="likesectionHead"><a 
 id="x1-20005"></a>References</h3>
<!--l. 1--><p class="noindent" >
   </p><div class="thebibliography">
   <p class="bibitem" ><span class="biblabel">
 [1]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="XFGST16"></a>F.&#x00A0;Ferrante, F.&#x00A0;Gouaisbaut, R.&#x00A0;G. Sanfelice, and S.&#x00A0;Tarbouriech. State estimation of linear systems
   in the presence of sporadic measurements. <span 
class="cmti-10">Automatica</span>, 73:101&#8211;109, November 2016.
</p>
   </div>
                                                                                         
                                                                                         
    
</body></html> 

                                                                                         


